"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[422],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>f});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var o=a.createContext({}),p=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(o.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,o=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=p(n),m=i,f=u["".concat(o,".").concat(m)]||u[m]||c[m]||r;return n?a.createElement(f,l(l({ref:t},d),{},{components:n})):a.createElement(f,l({ref:t},d))}));function f(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=m;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s[u]="string"==typeof e?e:i,l[1]=s;for(var p=2;p<r;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},1888:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var a=n(7462),i=(n(7294),n(3905));const r={toc_min_heading_level:2,toc_max_heading_level:2},l="Templates",s={unversionedId:"design-guides/templates",id:"design-guides/templates",title:"Templates",description:"This document describes the syntax and semantics of the Jinja template engine tailored for use in MaxBot.",source:"@site/docs/design-guides/templates.md",sourceDirName:"design-guides",slug:"/design-guides/templates",permalink:"/design-guides/templates",draft:!1,tags:[],version:"current",frontMatter:{toc_min_heading_level:2,toc_max_heading_level:2},sidebar:"docsSidebar",previous:{title:"Dialog State",permalink:"/design-guides/state"},next:{title:"Design Reference",permalink:"/category/design-reference"}},o={},p=[{value:"Synopsis",id:"synopsis",level:2},{value:"Variable Substitution",id:"variable-substitution",level:2},{value:"Escaping",id:"escaping",level:3},{value:"Expressions",id:"expressions",level:2},{value:"Variables",id:"variables",level:3},{value:"Data Types",id:"data-types",level:3},{value:"Literals",id:"literals",level:3},{value:"Operators",id:"operators",level:3},{value:"Methods",id:"methods",level:3},{value:"Filters",id:"filters",level:3},{value:"Tests",id:"tests",level:3},{value:"Undefined Value",id:"undefined-value",level:3},{value:"If Conditions",id:"if-conditions",level:2},{value:"Indirect Boolean Conversion",id:"indirect-boolean-conversion",level:3},{value:"For-In Loops",id:"for-in-loops",level:2},{value:"Iterating over lists",id:"iterating-over-lists",level:3},{value:"Iterating over dictionaries",id:"iterating-over-dictionaries",level:3},{value:"Loop filtering and else-block",id:"loop-filtering-and-else-block",level:3},{value:"Local Variables",id:"local-variables",level:2},{value:"Block assignment",id:"block-assignment",level:3},{value:"Scoping behavior",id:"scoping-behavior",level:3},{value:"Namespace object",id:"using-namespaces",level:3},{value:"Whitespace Control",id:"whitespace-control",level:2},{value:"Remove spaces around blocks",id:"remove-spaces-around-blocks",level:3},{value:"Iterating over",id:"sequences-and-iterables",level:2},{value:"Sequences",id:"sequences",level:3},{value:"Iterables",id:"iterables",level:3},{value:"Generators",id:"generators",level:3}],d={toc:p};function u(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"templates"},"Templates"),(0,i.kt)("p",null,"This document describes the syntax and semantics of the Jinja template engine tailored for use in MaxBot."),(0,i.kt)("h2",{id:"synopsis"},"Synopsis"),(0,i.kt)("p",null,"A template is simply a string that is interpreted by template engine. Special delimiters in the template allow you to write code using statements and expressions. When responding to a user, the template is passed user input and bot state to render the final response. You can use ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/context"},"context variables")," to access all necessary information during template rendering."),(0,i.kt)("p",null,"MaxBot allows to define responses in two different formats: a text response as a plain string and a command response as YAML document. Similarly, you can set two types of templates."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"Text template")," rendered into a plain string that is immediately sent to a user.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'  response: !jinja "The order {{ entities.order_number.literal }} is canceled."\n')),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"YAML template")," rendered into YAML document, which is then deserialized into a list of commands.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'response: !jinja/yaml |-\n    {% if slots.products %}\n      - quick_reply:\n          text: "Choose one of our products."\n          buttons:\n            {% for product in slots.products %}\n            - "{{ product.name }}"\n            {% endfor %}\n    {% else %}\n      - text: "I can\'t find the products that match your request."\n      - jump_to: { node: search_products, transition: response }\n    {% endif %}\n    {# a comment #}\n')),(0,i.kt)("p",null,'In the examples above, the "response" keyword followed by the ',(0,i.kt)("a",{parentName:"p",href:"https://yaml.org/spec/1.1/#id861700"},"YAML Tag"),", which denoted by an exclamation mark (",(0,i.kt)("inlineCode",{parentName:"p"},"!"),"). Bot resources have a couple of tags to define templates:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"!jinja")," - for text templates,"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"!jinja/yaml")," - for YAML templates.")),(0,i.kt)("p",null,"Templates themselves has a few kinds of delimiters."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"{{ ... }}")," - A print statement, that include ",(0,i.kt)("a",{parentName:"li",href:"#expressions"},"expression"),", which get replaced with values when a template is rendered."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"{% ... %}")," - Template tags include statements that control template logic, evaluate expressions, assign variables and more."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"{# ... #}")," - Comments that are not included in the template output.")),(0,i.kt)("h2",{id:"variable-substitution"},"Variable Substitution"),(0,i.kt)("p",null,"Include any context variable value in your response using the ",(0,i.kt)("inlineCode",{parentName:"p"},"{{ ... }}")," print-statement. If you now that the ",(0,i.kt)("inlineCode",{parentName:"p"},"user.name")," variable is set to the name of the user, then you can refer to it in the text response."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'response: !jinja "Good day to you, {{ user.name }}!"\n')),(0,i.kt)("p",null,"The same way you can include variable into the YAML response."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},'response: !jinja/yaml |-\n  - text: "Good day to you, {{ user.name }}!"\n')),(0,i.kt)("p",null,"If the user name is Norman, then in both cases the response that is displayed to user is"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"\ud83e\udd16 Good day to you, Norman!\n")),(0,i.kt)("h3",{id:"escaping"},"Escaping"),(0,i.kt)("p",null,"TODO"),(0,i.kt)("h2",{id:"expressions"},"Expressions"),(0,i.kt)("p",null,"You can use expressions everywhere in dialog tree conditions and templates. The simplest form of expressions are variables and literals. More complex expressions are built by combining expressions using operators. It is also possible to group expressions and control the order of operations using parentheses ()."),(0,i.kt)("h3",{id:"variables"},"Variables"),(0,i.kt)("p",null,"Template variables are used to store and refer to values during template rendering. The most important variables are context variables, of which state variables are a part. Templates also use global and local variables."),(0,i.kt)("p",null,"Context variables are a predefined set of variables passed for each template by the bot using Jinja context dictionary. Most context variables contain information about user input. You can just read those variables and you can't change them. The ",(0,i.kt)("inlineCode",{parentName:"p"},"slots")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"user")," context variables allows you to retaining information across dialog turns. You can change their attributes which are called state variables."),(0,i.kt)("p",null,"Global variables are shared by the bot between all templates. Typically they are utility functions. Examples are ",(0,i.kt)("a",{parentName:"p",href:"#namespace"},(0,i.kt)("inlineCode",{parentName:"a"},"namespace")),", ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/dictionaries#dict"},(0,i.kt)("inlineCode",{parentName:"a"},"dict")),", ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/lists#range."},(0,i.kt)("inlineCode",{parentName:"a"},"range")),". Local variables help you to store intermediate values and refer them later during the template rendering. They are described in the ",(0,i.kt)("a",{parentName:"p",href:"#local-variables"},"Local Variables")," section of this guide."),(0,i.kt)("h3",{id:"data-types"},"Data Types"),(0,i.kt)("p",null,"Which literals and operators are available to build an expression depends on the data type. There are ",(0,i.kt)("em",{parentName:"p"},"basic data types")," that you mostly use in expressions: ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/strings"},"strings"),", ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/numbers"},"numbers"),", ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/booleans"},"boolean"),", ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/lists"},"lists")," and ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/dictionaries"},"dictionaries"),". The links above are references with the detailed information about these types. For the most context variables the bot uses its custom object types which a descibed in ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/context"},"Context"),"  reference."),(0,i.kt)("p",null,"When working with templates, you may come across None Type, which is used to define a so-called null variable or attribute. This is like JSON null. It has a single valid value given by a literal ",(0,i.kt)("inlineCode",{parentName:"p"},"none"),", which is not the same as ",(0,i.kt)("inlineCode",{parentName:"p"},"0"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),", or an empty string. Be careful when using None Type, as almost all operations on it will fail. In most cases, maxbot avoids using this type and prefer ",(0,i.kt)("a",{parentName:"p",href:"#undefined-value"},"an undefined value")," which is more relaxed."),(0,i.kt)("h3",{id:"literals"},"Literals"),(0,i.kt)("p",null,"There are literals for different data types:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/design-reference/strings#literals"},"String Literals")," - ",(0,i.kt)("inlineCode",{parentName:"li"},'"Hello World"'),","),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/design-reference/booleans#literals"},"Boolean Literals")," - ",(0,i.kt)("inlineCode",{parentName:"li"},"true"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"false"),","),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/design-reference/lists#literals"},"List Literals")," - ",(0,i.kt)("inlineCode",{parentName:"li"},'["onion", "olives", "ham"]'),","),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/design-reference/dictionaries#literals"},"Dictionary Literals")," - ",(0,i.kt)("inlineCode",{parentName:"li"},'{"first_name": "John", "last_name": "Snow"}'),","),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/design-reference/numbers#literals"},"Number Literals")," - ",(0,i.kt)("inlineCode",{parentName:"li"},"42"),", ",(0,i.kt)("inlineCode",{parentName:"li"},"42.1e2"),","),(0,i.kt)("li",{parentName:"ul"},"None Type - ",(0,i.kt)("inlineCode",{parentName:"li"},"none"),".")),(0,i.kt)("h3",{id:"operators"},"Operators"),(0,i.kt)("p",null,"Jinja has operators to call ",(0,i.kt)("em",{parentName:"p"},"methods"),", apply ",(0,i.kt)("em",{parentName:"p"},"filters"),", perform ",(0,i.kt)("em",{parentName:"p"},"tests"),". More type-specific operators are also availabe:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/design-reference/strings#operators"},"String-specific Operators")," - ",(0,i.kt)("inlineCode",{parentName:"li"},'"yes" in message.text'),","),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/design-reference/booleans#comparisons"},"Comparison Operators")," - ",(0,i.kt)("inlineCode",{parentName:"li"},"slots.count > 0"),","),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/design-reference/booleans#logic"},"Logic Operators")," - ",(0,i.kt)("inlineCode",{parentName:"li"},"slot_in_focus and message.text"),","),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/design-reference/lists#operators"},"List-specific Operators")," - ",(0,i.kt)("inlineCode",{parentName:"li"},"entities.menu.all_values[0]"),","),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/design-reference/dictionaries#operators"},"Dictionary-specific Operators")," - ",(0,i.kt)("inlineCode",{parentName:"li"},'"description" in slots.product'),","),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/design-reference/numbers#operators"},"Math Operators")," - ",(0,i.kt)("inlineCode",{parentName:"li"},"slots.count + 1"),".")),(0,i.kt)("h3",{id:"methods"},"Methods"),(0,i.kt)("p",null,"You can call any of the methods defined on a variable\u2019s type. The value returned from the invocation is used as the value of the expression. You can output this value with a print-statement. For example call the ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/strings#method-capitalize"},(0,i.kt)("inlineCode",{parentName:"a"},"str.capitalize()"))," method defined on strings (where ",(0,i.kt)("inlineCode",{parentName:"p"},"entities.menu.value")," is a string):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{{ entities.menu.value.capitalize() }}\n")),(0,i.kt)("p",null,"The ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/jinja#expression-statement"},"expression-statement")," is useful to call methods that modify lists or dictionaries. It simply evaluates the expression and does nothing else.  Examples:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{% do slots.toppings_array.append("ketchup") %}\n{% do user.car.update(color="White") %}\n')),(0,i.kt)("p",null,"Methods are available for the following basic types:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/design-reference/strings#methods"},"String Methods"),";"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/design-reference/strings#methods"},"List Methods"),";"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/design-reference/strings#methods"},"Dictionary Methods"),".")),(0,i.kt)("h3",{id:"filters"},"Filters"),(0,i.kt)("p",null,"Filters are a convenient way to change variables. Filters are separated from the variable by a pipe symbol ",(0,i.kt)("inlineCode",{parentName:"p"},"|"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{{ x|upper }}\n")),(0,i.kt)("p",null,"Filters may have optional arguments in parentheses."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{{ x|replace("Hello", "Goodbye") }}\n{{ x|indent(width=8) }}\n')),(0,i.kt)("p",null,"Filters are more convenient than methods because multiple filters can be easily chained. The output of one filter is applied to the next."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{{ x|select|first }}\n")),(0,i.kt)("p",null,"Filters are available for the following basic types:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/design-reference/strings#filters"},"String Filters"),";"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/design-reference/strings#filters"},"List Filters"),";"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/design-reference/strings#filters"},"Dictionary Filters"),".")),(0,i.kt)("h3",{id:"tests"},"Tests"),(0,i.kt)("p",null,"Tests can be used to test a variable against a common property. To test a variable or expression, you add ",(0,i.kt)("inlineCode",{parentName:"p"},"is")," plus the name of the test after the variable."),(0,i.kt)("p",null,"Tests can be used along with ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/jinja#conditional-expression"},"inline If-expression"),". For example, to output the ",(0,i.kt)("inlineCode",{parentName:"p"},"user.name")," variable depending on whether it is defined, you can do"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'Hello, {{ user.name if user.name is defined else "dear stranger" }}!\n')),(0,i.kt)("p",null,"where ",(0,i.kt)("inlineCode",{parentName:"p"},"user.name")," is a variable and ",(0,i.kt)("inlineCode",{parentName:"p"},"defined")," is a test."),(0,i.kt)("p",null,"Tests can accept arguments: ",(0,i.kt)("inlineCode",{parentName:"p"},"slots.count is divisibleby 3"),"."),(0,i.kt)("p",null,"The power of tests is revealed when used with ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/lists#filters-select"},"list selection filters")," to select or reject list items based on a property defined by the test. For example, the following expression finds and returns the first element of the ",(0,i.kt)("inlineCode",{parentName:"p"},"numbers")," list that are divisible by 3:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{{ numbers|select("divisibleby", 3)|first }}\n')),(0,i.kt)("p",null,"Tests are available for the following basic types:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/design-reference/strings#tests"},"String Tests"),";"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/design-reference/booleans#tests"},"Boolean Tests"),";"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/design-reference/lists#tests"},"List Tests"),";"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/design-reference/dictionaries#tests"},"Dictionary Tests"),";"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/design-reference/numbers#tests"},"Number Tests"),".")),(0,i.kt)("p",null,"See also: ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/numbers#test-divisibleby"},(0,i.kt)("inlineCode",{parentName:"a"},"x is divisibleby")),", ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/lists#filter-select"},(0,i.kt)("inlineCode",{parentName:"a"},"list|select")),", ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/lists#filter-first"},(0,i.kt)("inlineCode",{parentName:"a"},"list|first")),"."),(0,i.kt)("h3",{id:"undefined-value"},"Undefined Value"),(0,i.kt)("p",null,"If variable or its attribute does not exist, you will get back an undefined value. An undefined value will ",(0,i.kt)("strong",{parentName:"p"},"fail for every operation"),", except for those listed below."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"You can use undefined value with ",(0,i.kt)("a",{parentName:"li",href:"/design-reference/booleans#logic"},"boolean operators")," and conditions. In this case the undefined value will be considered false."),(0,i.kt)("li",{parentName:"ul"},"You can get any attribute on undefined variable which will also result in a undefined value."),(0,i.kt)("li",{parentName:"ul"},"You can iterate over undefined value, which will result in empty sequence.")),(0,i.kt)("p",null,"TODO: need examples"),(0,i.kt)("p",null,"You can not use undifined value in ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/jinja#print-statement"},"print statement")," and ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/jinja#slot-assignment"},"state assignments"),". Use ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/lists#filter-default"},(0,i.kt)("inlineCode",{parentName:"a"},"x|default"))," filter to prevent undefined values in expressions."),(0,i.kt)("h2",{id:"if-conditions"},"If Conditions"),(0,i.kt)("p",null,"Use if statement to change the response based on a specific conditions. In its simplest form, the if statement has a single if condition. It executes a block only if that condition is true."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"response: !jinja |-\n    The temperature outside is {{ slots.temperatureF }}\xb0F.\n    {% if slots.temperatureF <= 32 %}\n    It's very cold. Consider wearing a scarf.\n    {% endif %}\n    Have a nice day!\n")),(0,i.kt)("p",null,"The example above checks whether the temperature is less than or equal to 32 degrees Fahrenheit (the freezing point of water). If it is, a recommendation is printed."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"\ud83e\udd16 The temperature outside is 30\xb0F.\n   It's very cold. Consider wearing a scarf.\n   Have a nice day!\n")),(0,i.kt)("p",null,"Otherwise, no recommendation is printed, and code execution continues after the if statement\u2019s closing tag."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"\ud83e\udd16 The temperature outside is 35\xb0F.\n   Have a nice day!\n")),(0,i.kt)("p",null,"The if statement can provide an alternative set of statements, known as an else clause, for situations when the if condition is false. These statements are indicated by the else keyword. One of these two branches is always executed."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{% if slots.temperatureF <= 32 %}\nIt's very cold. Consider wearing a scarf.\n{% else %}\nIt's not that cold. Wear a t-shirt.\n{% endif %}\n")),(0,i.kt)("p",null,"You can chain multiple if statements together to consider additional clauses."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{% if slots.temperatureF <= 32 %}\nIt's very cold. Consider wearing a scarf.\n{% elif temperatureInFahrenheit >= 86 %}\nIt's really warm. Don't forget to wear sunscreen.\n{% else %}\nIt's not that cold. Wear a t-shirt.\n{% endif %}\n")),(0,i.kt)("p",null,"The final else clause is optional, however, and can be excluded if the set of conditions doesn\u2019t need to be complete."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{% if slots.temperatureF <= 32 %}\nIt's very cold. Consider wearing a scarf.\n{% elif temperatureInFahrenheit >= 86 %}\nIt's really warm. Don't forget to wear sunscreen.\n{% endif %}\n")),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"If")," can also be used as an ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/jinja#conditional-expression"},"inline expression")," and for ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/jinja#for-if"},"loop filtering"),"."),(0,i.kt)("h3",{id:"indirect-boolean-conversion"},"Indirect Boolean Conversion"),(0,i.kt)("p",null,"The boolean operators ",(0,i.kt)("inlineCode",{parentName:"p"},"and"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"or"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"not")," and statements like ",(0,i.kt)("inlineCode",{parentName:"p"},"{% if ... %}")," handle not only boolean type (",(0,i.kt)("em",{parentName:"p"},"true"),", ",(0,i.kt)("em",{parentName:"p"},"false"),") but also numbers, strings, lists, etc."),(0,i.kt)("p",null,"The following values are considered ",(0,i.kt)("strong",{parentName:"p"},"false")," in boolean operations:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"constants defined to be ",(0,i.kt)("em",{parentName:"li"},"false"),": ",(0,i.kt)("inlineCode",{parentName:"li"},"none")," and ",(0,i.kt)("a",{parentName:"li",href:"/design-reference/booleans#false"},(0,i.kt)("inlineCode",{parentName:"a"},"false")),";"),(0,i.kt)("li",{parentName:"ul"},"zero of any numeric type: ",(0,i.kt)("a",{parentName:"li",href:"/design-reference/numbers#new-int"},(0,i.kt)("inlineCode",{parentName:"a"},"0")),", ",(0,i.kt)("a",{parentName:"li",href:"/design-reference/numbers#new-float"},(0,i.kt)("inlineCode",{parentName:"a"},"0.0")),";"),(0,i.kt)("li",{parentName:"ul"},"empty sequences and collections: ",(0,i.kt)("a",{parentName:"li",href:"/design-reference/strings#new-string"},(0,i.kt)("inlineCode",{parentName:"a"},'""')),", ",(0,i.kt)("a",{parentName:"li",href:"/design-reference/lists#new-tuple"},(0,i.kt)("inlineCode",{parentName:"a"},"()")),", ",(0,i.kt)("a",{parentName:"li",href:"/design-reference/lists#new-list"},(0,i.kt)("inlineCode",{parentName:"a"},"[]")),", ",(0,i.kt)("a",{parentName:"li",href:"/design-reference/dictionaries#new-dict"},(0,i.kt)("inlineCode",{parentName:"a"},"{}"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#undefined-value"},"undefined value"),".")),(0,i.kt)("p",null,"Everything else is considered ",(0,i.kt)("strong",{parentName:"p"},"true"),". For example,"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{% x = "hello world" %}\n{% y = "" %}\n\n{{ x if x else "nothing" }}\n-> hello world\n\n{{ y if y else "nothing" }}\n-> nothing\n')),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"See also"),": ",(0,i.kt)("a",{parentName:"p",href:"https://docs.python.org/3/reference/expressions.html#boolean-operations"},"Python Docs"),"."),(0,i.kt)("h2",{id:"for-in-loops"},"For-In Loops"),(0,i.kt)("p",null,"For-in loop allows template blocks to be executed repeatedly. You use the loop to iterate over lists, dictionaries, strings, as long as any objects that conform to the ",(0,i.kt)("a",{parentName:"p",href:"#sequences-and-iterables"},"iterable")," protocol."),(0,i.kt)("h3",{id:"iterating-over-lists"},"Iterating over lists"),(0,i.kt)("p",null,"Use for-in loop to build a response text based on dynamically collected data. For example, ",(0,i.kt)("inlineCode",{parentName:"p"},"slots.products")," variable contains a list of products that the user wants to buy"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'["Anti-Gravity Boots", "Fountain of Youth", "Inflatable Flower Bed"]\n')),(0,i.kt)("p",null,"This example uses a for-in loop to iterate over the list of products in the user's bag."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"Items in your bag.\n{% for product in slots.products %}\n    {{ product }}\n{% endfor %}\n->\nItems in your bag.\n    Anti-Gravity Boots\n    Fountain of Youth\n    Inflatable Flower Bed\n")),(0,i.kt)("p",null,"It is common to use ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/lists#filter-sort"},(0,i.kt)("inlineCode",{parentName:"a"},"list|sort")),", ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/lists#filter-select"},(0,i.kt)("inlineCode",{parentName:"a"},"list|select"))," and other ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/lists#filters-transform"},"transformation")," and ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/lists#filters-select"},"selection")," filters to prepare lists before output."),(0,i.kt)("h3",{id:"iterating-over-dictionaries"},"Iterating over dictionaries"),(0,i.kt)("p",null,"You can use ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/dictionaries#filter-items"},(0,i.kt)("inlineCode",{parentName:"a"},"dict|items"))," filter to iterate over a dictionary to access its key-value pairs. Each item in the dictionary is returned as a (key, value) pair and you use them within the body of the for-in loop as explicitly named variables. In the template example below, the dictionary\u2019s keys are decomposed into a variable called ",(0,i.kt)("inlineCode",{parentName:"p"},"city"),", and the dictionary\u2019s values are decomposed into a variable called ",(0,i.kt)("inlineCode",{parentName:"p"},"population"),"."),(0,i.kt)("p",null,"Let's the ",(0,i.kt)("inlineCode",{parentName:"p"},"slots.city_population")," variable contains a dictionary in which the key is the name of the city, and the value is its population."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{"Tokyo": 9273000, "Rome": 2868104, "Beijing": 20693000}\n')),(0,i.kt)("p",null,"The dictionary can be iterated in the following way."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{% for city, population in slots.city_population|items %}\n    {{ city }} has a population of {{ population }}.\n{% endfor %}\n->\nTokyo has a population of 9273000.\nRome has a population of 2868104.\nBeijing has a population of 20693000.\n")),(0,i.kt)("p",null,"The contents of a dictionary are inherently unordered, and iterating over them doesn\u2019t guarantee the order in which they will be retrieved. If order matters, use the ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/dictionaries#filter-dictsort"},(0,i.kt)("inlineCode",{parentName:"a"},"dict|dictsort"))," filter to iterate over dictionary. If you want to iterate over dictionary keys or values separately, it is convenient to use ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/dictionaries#method-keys"},(0,i.kt)("inlineCode",{parentName:"a"},"dict.keys()"))," and ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/dictionaries#method-values"},(0,i.kt)("inlineCode",{parentName:"a"},"dict.values()"))," methods for this purpose."),(0,i.kt)("h3",{id:"loop-filtering-and-else-block"},"Loop filtering and else-block"),(0,i.kt)("p",null,"You can filter the sequence during iteration, which allows you to skip items. The following example skips all the products which are not in stock."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Product List\n{% for product in slots.products if product.in_stock %}\n    {{ product.title }}\n{% endfor %}\n")),(0,i.kt)("p",null,"Use ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/lists#filters-select"},"selection")," filters if you need more sophisticated filtering."),(0,i.kt)("p",null,"If no iteration took place because the sequence was empty or the filtering removed all the items from the sequence, you can render a default block by using else:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Product List\n{% for product in products %}\n    {{ product.title }}\n{% else %}\n    no products found\n{% endfor %}\n")),(0,i.kt)("p",null,"Also, inside of a for-in block, you can acccess special ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/jinja#loop-variable"},"loop variable")," which has many useful features."),(0,i.kt)("h2",{id:"local-variables"},"Local Variables"),(0,i.kt)("p",null,"Local variables are any variables, that you define in a template. Local variables are not stored anywhere and only live while the template is being rendered. You can use local variables to store intermediate values and refer them later during the template rendering. Set a value of a local variable using the ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/jinja#local-assignment"},"local-assignment")," statement."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{% set greeting = "Hello" %}\n')),(0,i.kt)("p",null,"Later in your template, you can get a value of a local variable simply by using its name ",(0,i.kt)("inlineCode",{parentName:"p"},"greeting"),"."),(0,i.kt)("p",null,"You can use local variables to avoid code duplication. If you need to use a complex expression multiple times, you can assign its value to a local variable and use that variable instead."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"response: !jinja |-\n    {% set rating = slots.total_points / slots.total_voters %}\n    {% if rating > 4 %}\n    Great stuff!\n    {% elif rating > 3 %}\n    A good thing.\n    {% else %}\n    Bad reviews...\n    {% endif %}\n")),(0,i.kt)("p",null,"If you try to use a variable that is not assigned a value in a template before, you will get an ",(0,i.kt)("a",{parentName:"p",href:"#undefined-value"},"undefined value"),"."),(0,i.kt)("h3",{id:"block-assignment"},"Block assignment"),(0,i.kt)("p",null,"Block assignments are used to capture the contents of a block into a ",(0,i.kt)("a",{parentName:"p",href:"#local-variables"},"local variable"),". Instead of using an equals sign and a value, you just write the variable name and then everything until ",(0,i.kt)("inlineCode",{parentName:"p"},"{% endset %}")," is captured."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{% set reply %}\nYou wrote: {{ message.text }}\n{% endset %}\n")),(0,i.kt)("p",null,"The block assignment supports ",(0,i.kt)("a",{parentName:"p",href:"#filters"},"filters"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{% set reply | truncate %}\nYou wrote: {{ message.text }}\n{% endset %}\n")),(0,i.kt)("h3",{id:"scoping-behavior"},"Scoping behavior"),(0,i.kt)("p",null,"Keep in mind that it is ",(0,i.kt)("strong",{parentName:"p"},"not possible")," to set variables inside a block and have them show up outside of it. This also applies to ",(0,i.kt)("a",{parentName:"p",href:"#loop-statements"},"loops"),". The only exception to that rule are ",(0,i.kt)("a",{parentName:"p",href:"#if-statement"},"if statement")," which do not introduce a scope."),(0,i.kt)("p",null,"As a result the following template is not going to do what you might expect:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{% set iterated = false %}\n{% for item in seq %}\n    {{ item }}\n    {% set iterated = true %}\n{% endfor %}\n{% if not iterated %} did not iterate {% endif %}\n")),(0,i.kt)("p",null,"It is not possible with Jinja syntax to do this. Instead use alternative constructs like the ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/jinja#for-else"},"loop-else")," block or the special ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/jinja#loop-variable"},(0,i.kt)("inlineCode",{parentName:"a"},"loop"))," variable."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{% for item in seq %}\n    {{ item }}\n{% else %}\n    did not iterate\n{% endfor %}\n")),(0,i.kt)("p",null,"More complex use cases can be handled using ",(0,i.kt)("a",{parentName:"p",href:"#using-namespaces"},(0,i.kt)("inlineCode",{parentName:"a"},"namespace()"))," objects which allow propagating of changes across scopes."),(0,i.kt)("h3",{id:"using-namespaces"},"Namespace object"),(0,i.kt)("p",null,"Use ",(0,i.kt)("inlineCode",{parentName:"p"},"namespace()")," global function to create a new container that allows attribute assignment using the set-tag:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'{% set ns = namespace() %}\n{% set ns.foo = "bar" %}\n')),(0,i.kt)("p",null,"The main purpose of this is to allow carrying a value from within a loop body to an outer scope. Initial values can be provided as a dict, as keyword arguments, or both."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{% set ns = namespace(found=false) %}\n{% for item in items %}\n    {% if item.check_something() %}\n        {% set ns.found = true %}\n    {% endif %}\n    * {{ item.title }}\n{% endfor %}\nFound item having something: {{ ns.found }}\n")),(0,i.kt)("p",null,"Note that the ",(0,i.kt)("inlineCode",{parentName:"p"},"x.y")," notation in the set tag is only allowed for namespace objects; attempting to assign an attribute on any other object will raise an exception."),(0,i.kt)("h2",{id:"whitespace-control"},"Whitespace Control"),(0,i.kt)("p",null,"Template tags ",(0,i.kt)("inlineCode",{parentName:"p"},"{% ... %}")," introduce extra spaces and newlines into the template. We configured the Jinja Engine to"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"remove block lines ",(0,i.kt)("inlineCode",{parentName:"li"},"{% ... %}")," when rendering templates,"),(0,i.kt)("li",{parentName:"ul"},"preserve other spaces.")),(0,i.kt)("p",null,"For example, the template"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Items in your bag.\n\n{% for product in products %}\n    {{ product }}\n{% endfor %}\n")),(0,i.kt)("p",null,"will render the text like this"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"Items in your bag.\n\n    Anti-Gravity Boots\n    Fountain of Youth\n    Inflatable Flower Bed\n")),(0,i.kt)("p",null,"As you may see,"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},'first line "Items in your bag." and the second empty line are kept as is,'),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"{% for ... %}")," block line is removed,"),(0,i.kt)("li",{parentName:"ul"},"the spaces at the beginning of each generated product line are preserved,"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"{% endfor %}")," block line is removed.")),(0,i.kt)("h3",{id:"remove-spaces-around-blocks"},"Remove spaces around blocks"),(0,i.kt)("p",null,"There is a common situation when you use a bunch of template blocks to build just a single line of response text. You can break such blocks into multiple template lines and remove unnecessary spaces and newlines by hand."),(0,i.kt)("p",null,"If you add a minus sign to the start ",(0,i.kt)("inlineCode",{parentName:"p"},"{%-...%}")," and/or end ",(0,i.kt)("inlineCode",{parentName:"p"},"{%...-%}")," of a block, the spaces and newlines before or after that block will be removed."),(0,i.kt)("p",null,"For example, let's build an address line consisting of optional parts. We have to use a conditional block for each optional part."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{%- if address.building %}{{ address.building }} {% endif -%}\n{{ address.street }}, {{ address.city }}\n{%- if address.state %}, {{ address.state }}{% endif -%}\n{%- if address.country %}, {{ address.country }}{% endif %}\n")),(0,i.kt)("p",null,"If an address variable has the following value (country is missing):"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "street": "Landing Lange",\n    "building": 4455,\n    "city": "Louisville",\n    "state": "KY",\n}\n')),(0,i.kt)("p",null,"In the resulting string, all template lines will be joined into one."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"4455 Landing Lange, Louisville, KY\n")),(0,i.kt)("h2",{id:"sequences-and-iterables"},"Iterating over"),(0,i.kt)("h3",{id:"sequences"},"Sequences"),(0,i.kt)("p",null,"A ",(0,i.kt)("strong",{parentName:"p"},"sequence")," is a generalization of a list that can be immutable. Most common sequences are"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"list")," - a ",(0,i.kt)("em",{parentName:"li"},"mutable")," sequence in which you can add and remove items;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"tuple")," - an ",(0,i.kt)("em",{parentName:"li"},"immutable")," sequence in which you cannot add new or remove existing elements;"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/design-reference/strings"},"string")," - an immutable sequence of characters.")),(0,i.kt)("p",null,"Most often you will work with lists. Strings are used in ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/strings"},"their own way"),". But keep in mind, that operators, tests and filters in this sections can filter any sequence. Methods are list-only."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"See also"),": ",(0,i.kt)("a",{parentName:"p",href:"https://docs.python.org/3/library/stdtypes.html#sequence-types-list-tuple-range"},"Python Sequence Types"),"."),(0,i.kt)("h3",{id:"iterables"},"Iterables"),(0,i.kt)("p",null,"A generalization of a sequence is an ",(0,i.kt)("strong",{parentName:"p"},"iterable"),". An iterable is just a collection where you can get each item one by one. You can't refer items in random order. All sequences are iterables. Examples of iterables that not a sequences are:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/design-reference/dictionaries"},"dictionary"),", because it is unordered;"),(0,i.kt)("li",{parentName:"ul"},"the results of ",(0,i.kt)("a",{parentName:"li",href:"/design-reference/dictionaries#method-keys"},"dict.keys()"),", ",(0,i.kt)("a",{parentName:"li",href:"/design-reference/dictionaries#method-values"},"dict.values()"),", ",(0,i.kt)("a",{parentName:"li",href:"/design-reference/dictionaries#method-items"},"dict.items()"),", because they are special iterable views.")),(0,i.kt)("p",null,"Only some of the filters (see ",(0,i.kt)("a",{parentName:"p",href:"#generators"},"generators")," below) and tests in this section can be applied  directly to iterables. Operators and methods cannot. But you alwas can turn an iterable into a list using ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/lists#filter-list"},(0,i.kt)("inlineCode",{parentName:"a"},"iterable|list"))," filter."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"See also"),": ",(0,i.kt)("a",{parentName:"p",href:"https://docs.python.org/3/library/stdtypes.html#iterator-types"},"Python Iterator Types"),"."),(0,i.kt)("h3",{id:"generators"},"Generators"),(0,i.kt)("p",null,"Since you can't refer items of iterable in random order, this allows to have ",(0,i.kt)("em",{parentName:"p"},"lazy iterables"),"."),(0,i.kt)("p",null,"Many filters in this section (called ",(0,i.kt)("strong",{parentName:"p"},"generators"),") return special kind of iterable which is lazy and postpones calculations until they are actually needed. These are all ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/lists#filters-select"},"selectors")," and almost all ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/jinja#filters-transform"},"transformers"),"."),(0,i.kt)("p",null,"Generators can be freely chained together, but in the end you have to explicitly calculate the result. It's good practice to ",(0,i.kt)("strong",{parentName:"p"},"always use ",(0,i.kt)("a",{parentName:"strong",href:"/design-reference/lists#filter-list"},(0,i.kt)("inlineCode",{parentName:"a"},"iterable|list"))," at the end of the generators chain")," if you plan on getting or displaying a list as a result."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{% numbers = [0, 1, 2, 3, 2, 1] %}\n\n# bad, no actual calculations\n{{ numbers|select|unique }}\n-> <generator object do_unique at 0x120ec1eb0>\n\n# good, the result is calculated\n{{ numbers|select|unique|list }}\n-> [1, 2, 3]\n")),(0,i.kt)("p",null,"There are also some filters such as ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/lists#filter-last"},(0,i.kt)("inlineCode",{parentName:"a"},"list|last"))," and ",(0,i.kt)("a",{parentName:"p",href:"/design-reference/lists#filter-length"},(0,i.kt)("inlineCode",{parentName:"a"},"list|length"))," that does not work with generators. You may want to explicitly convert it to a list too:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"{% numbers = [0, 3, 2, 1, 0] %}\n\n{{ numbers|select|list|last }}\n-> 1\n\n{{ numbers|select|list|length }}\n-> 3\n")),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"See also"),": ",(0,i.kt)("a",{parentName:"p",href:"https://docs.python.org/3/library/stdtypes.html#generator-types"},"Python Generator Types"),"."))}u.isMDXComponent=!0}}]);