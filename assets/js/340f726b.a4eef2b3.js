"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[651],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,u=r(e,["components","mdxType","originalType","parentName"]),d=p(n),c=o,h=d["".concat(l,".").concat(c)]||d[c]||m[c]||i;return n?a.createElement(h,s(s({ref:t},u),{},{components:n})):a.createElement(h,s({ref:t},u))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,s=new Array(i);s[0]=c;var r={};for(var l in t)hasOwnProperty.call(t,l)&&(r[l]=t[l]);r.originalType=e,r[d]="string"==typeof e?e:o,s[1]=r;for(var p=2;p<i;p++)s[p]=n[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},5195:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>p});var a=n(7462),o=(n(7294),n(3905));const i={toc_min_heading_level:2,toc_max_heading_level:2},s="Creating Bots",r={unversionedId:"getting-started/creating-bots",id:"getting-started/creating-bots",title:"Creating Bots",description:"This guide will walk you through the basics of creating bots. The typical bot creation workflow includes the following steps.",source:"@site/docs/getting-started/creating-bots.md",sourceDirName:"getting-started",slug:"/getting-started/creating-bots",permalink:"/getting-started/creating-bots",draft:!1,tags:[],version:"current",frontMatter:{toc_min_heading_level:2,toc_max_heading_level:2},sidebar:"docsSidebar",previous:{title:"Quick Start",permalink:"/getting-started/quick-start"},next:{title:"Tutorials",permalink:"/category/tutorials"}},l={},p=[{value:"YAML Basics",id:"yaml-basics",level:2},{value:"Strings",id:"strings",level:3},{value:"Lists and Dictionaries",id:"lists-and-dictionaries",level:3},{value:"Channels",id:"channels",level:2},{value:"Intents",id:"intents",level:2},{value:"Entities",id:"entities",level:2},{value:"Phrase Entities",id:"phrase-entities",level:3},{value:"Regex Entities",id:"regex-entities",level:3},{value:"Using entities",id:"using-entities",level:3},{value:"Dialog Tree",id:"dialog-tree",level:2},{value:"Root nodes",id:"root-nodes",level:3},{value:"Followup nodes",id:"followup-nodes",level:3},{value:"Conditions",id:"conditions",level:2},{value:"<code>intents</code>",id:"intents-1",level:3},{value:"<code>entities</code>",id:"entities-1",level:3},{value:"<code>user</code>, <code>slot</code>, <code>dialog</code>",id:"user-slot-dialog",level:3},{value:"<code>message</code>",id:"message",level:3},{value:"&quot;Anything else&quot; Conditions",id:"anything-else-conditions",level:3},{value:"Boolean Conditions",id:"boolean-conditions",level:3},{value:"<code>true</code>",id:"true",level:4},{value:"<code>false</code>",id:"false",level:4},{value:"Responses",id:"responses",level:2},{value:"Text Responses",id:"text-responses",level:3},{value:"Long lines",id:"long-lines",level:3},{value:"Multiline strings",id:"multiline-strings",level:3},{value:"Command <code>text</code>",id:"command-text",level:3},{value:"Command <code>image</code>",id:"command-image",level:3},{value:"Command <code>quick_reply</code>",id:"command-quick_reply",level:3},{value:"Control Commands",id:"control-commands",level:3},{value:"Templates",id:"templates",level:2},{value:"Text Templates",id:"text-templates",level:3},{value:"YAML Templates",id:"yaml-templates",level:3},{value:"Jump to a node",id:"jump-to-a-node",level:2},{value:"Slot Filling",id:"slot-filling",level:2},{value:"Digressions",id:"digressions",level:2},{value:"Extensions",id:"extensions",level:2},{value:"Resources",id:"resources",level:2},{value:"Resource Directory",id:"resource-directory",level:3},{value:"Using environment variables",id:"using-environment-variables",level:3}],u={toc:p};function d(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"creating-bots"},"Creating Bots"),(0,o.kt)("p",null,"This guide will walk you through the basics of creating bots. The typical bot creation workflow includes the following steps."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Start by creating a YAML-file that will house the bot resources. Call it ",(0,o.kt)("inlineCode",{parentName:"li"},"bot.yaml")," or whatever you want."),(0,o.kt)("li",{parentName:"ul"},"Create intents that represent the user needs. For example, intents such as ",(0,o.kt)("inlineCode",{parentName:"li"},"intents.about_company")," or ",(0,o.kt)("inlineCode",{parentName:"li"},"intents.place_order"),"."),(0,o.kt)("li",{parentName:"ul"},"Define any entities that are needed to more clearly understand the user's meaning. For example, you might add an ",(0,o.kt)("inlineCode",{parentName:"li"},"entities.product")," entity that you can use with the ",(0,o.kt)("inlineCode",{parentName:"li"},"intents.place_order")," intent to understand what product the customer wants to buy."),(0,o.kt)("li",{parentName:"ul"},"Build a dialog that detects the defined intents and addresses them, either with simple responses or with a dialog flow that collects more information first."),(0,o.kt)("li",{parentName:"ul"},"Test each function that you add to the bot running the MaxBot CLI app, incrementally, as you go."),(0,o.kt)("li",{parentName:"ul"},"As your bot grows, split resources into several files and place them into the MaxBot-specified directory structure."),(0,o.kt)("li",{parentName:"ul"},"Add more features to your bot with extensions.")),(0,o.kt)("h2",{id:"yaml-basics"},"YAML Basics"),(0,o.kt)("p",null,"This section provides a briefly and opinionated overview of YAML syntax, which is how MaxBot resources are expressed. We use YAML because it is easier for humans to read and write than other common data formats like XML or JSON."),(0,o.kt)("p",null,"The YAML document consists of a nested collection of dictionaries, lists, and strings where indentation is used to indicate nesting."),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"MaxBot uses ",(0,o.kt)("a",{parentName:"p",href:"https://marshmallow.readthedocs.io/"},"marshmallow")," schemas to validate and convert YAML data into a specific types. For example, schemas can turn"),(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},"YAML dictionaries into objects with required and optional attributes;"),(0,o.kt)("li",{parentName:"ul"},"strings into more specific scalars such as numbers and booleans."))),(0,o.kt)("h3",{id:"strings"},"Strings"),(0,o.kt)("p",null,"YAML strings are good to read, but they can be tricky to write instead."),(0,o.kt)("p",null,"Plain strings are unquoted and are the most readable."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"Good day to you!\n")),(0,o.kt)("p",null,"While you can put just about anything into an unquoted string, there are some exceptions:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},": #")," - delimiters that better not to use at all,"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"' \" [] {} > | * & ! % # `` @ ,")," - special characters that better not to use in the begining of a string.")),(0,o.kt)("p",null,"Use double-quoted strings to not care about special characters."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'response: "I should put a colon here: so I did"\n')),(0,o.kt)("p",null,"Strings enclosed in double-quotes is only capable of expressing arbitrary unicode characters, by using c-style escape sequences starting with a backslash ",(0,o.kt)("inlineCode",{parentName:"p"},"\\"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'response: "a \\t TAB and a \\n NEWLINE"\n')),(0,o.kt)("p",null,"Incorrect sequences will cause a syntax error. Escape backslash itself ",(0,o.kt)("inlineCode",{parentName:"p"},"\\\\")," to avoid the problem."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'response: "c:\\\\windows"\n')),(0,o.kt)("p",null,"The single-quoted style becomes useful to avoid escaping mess when your string contains a lot of backslashes."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"regexps:\n  - '[DEF]\\-[A-Z]{2}\\d{5}'\n")),(0,o.kt)("p",null,"Within single quotes the only supported escape sequence is a doubled single quote ",(0,o.kt)("inlineCode",{parentName:"p"},"''")," denoting the single quote itself as in"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"response: 'I won''t!'\n")),(0,o.kt)("p",null,"There are also literal and folded block styles are the most readable way to create multi-line responses or those containing long lines. String blocks relies on outline indentation and resistant to delimiter collision. They are describe in the ",(0,o.kt)("a",{parentName:"p",href:"#responses"},"Responses")," section below."),(0,o.kt)("h3",{id:"lists-and-dictionaries"},"Lists and Dictionaries"),(0,o.kt)("p",null,'All members of a list are lines beginning at the same indentation level starting with a "- " (a hyphen and a space):'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"- Good morning\n- How are you?\n- Hello\n- Hi\n")),(0,o.kt)("p",null,"A dictionary is represented in a simple ",(0,o.kt)("inlineCode",{parentName:"p"},"key: value")," form (the colon must be followed by a space):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"condition: intents.greetings\nresponse: Good day to you!\n")),(0,o.kt)("p",null,"More complicated data structures are possible with outline indentation. There may be lists of dictionaries, dictionaries whose values are lists or a mix of both:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"intents:\n  - name: greetings\n    examples:\n      - Good morning\n      - How are you?\n      - Hello\n      - Hi\ndialog:\n  - condition: intents.greetings\n    response: Good day to you!\n")),(0,o.kt)("p",null,"The specific number of spaces in the indentation is unimportant as long as parallel elements have the same left justification and the hierarchically nested elements are indented further."),(0,o.kt)("p",null,"There is more compact format for both lists"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"[Good morning, How are you?, Hello, Hi]\n")),(0,o.kt)("p",null,"and dictionaries"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"{condition: intents.greetings, response: Good day to you!}\n")),(0,o.kt)("p",null,'These are called "flow collections" and can sometimes be useful.'),(0,o.kt)("h2",{id:"channels"},"Channels"),(0,o.kt)("p",null,"Channels are a way to integrate your bot with various messaging platforms. You must configure at least one channel to create a bot. MaxBot provides pre-built channels for Telegram, Viber Chatbots, VKontakte and there will be more soon."),(0,o.kt)("p",null,"Just add the channel configuration to the bot resources to integrate the bot with that channel. The process of integrating your bot with a specific messaging platform is covered in the schema description of the corresponding channel. For example, ",(0,o.kt)("a",{parentName:"p",href:"/design-reference/resources#telegramschema"},"TelegramSchema")," description says that you should go to ",(0,o.kt)("a",{parentName:"p",href:"https://t.me/botfather"},"@BotFacther"),", get an API token and specify it in the bot resources."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"channels:\n  telegram:\n    api_token: 110201543:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw\n")),(0,o.kt)("h2",{id:"intents"},"Intents"),(0,o.kt)("p",null,"Intents are purposes or goals that are expressed in a user input, such as answering a question or making a reservation. By recognizing the intent expressed in a user's input, the bot can choose the correct dialog flow for responding to it. For example, you might want to define ",(0,o.kt)("inlineCode",{parentName:"p"},"intents.buy_something")," intent to recognize when the user wants to make a purchase."),(0,o.kt)("p",null,"Create an intent by providing a short name and examples of utterances that user typically use to indicate their goal."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"intents:\n  - name: reservation\n    examples:\n      - i'd like to make a reservation\n      - I want to reserve a table for dinner\n      - do you have openings for next Wednesday at 7?\n      - Is there availability for 4 on Tuesday night?\n      - i'd like to come in for brunch tomorrow\n  - name: about_restaurant\n    examples:\n      - Tell me about the restaurant\n      - i want to know about you\n      - What's your story?\n      - Where do you source your produce from?\n")),(0,o.kt)("p",null,"The examples are used by the NLU model to recognize the same and similar types of utterances and map them to the appropriate intent. Start with a few examples and add them as needed."),(0,o.kt)("p",null,"You access recognized intents using ",(0,o.kt)("inlineCode",{parentName:"p"},"intents")," variable in conditions and responses. Use expressions like ",(0,o.kt)("inlineCode",{parentName:"p"},"intents.reservation")," in the dialog tree conditions to chose the correct dialog node for respond to the user."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"- condition: intents.reservation\n  response: Let's book a table for you...\n- condition: intents.about_restaurant\n  response: Food Lovers is an unique restaurant...\n")),(0,o.kt)("p",null,"If, for example, the user input is asking to make a reservation, then the ",(0,o.kt)("inlineCode",{parentName:"p"},"intents.reservation")," condition evaluates to true and the node with this condition is processed."),(0,o.kt)("h2",{id:"entities"},"Entities"),(0,o.kt)("p",null,"Entities are structured pieces of information in the user input that is relevant to the user's purpose. By defining entities, you can help the bot identify references in the user input that are related to intents of interest. Given the ",(0,o.kt)("inlineCode",{parentName:"p"},"intents.buy_something")," you may want to add ",(0,o.kt)("inlineCode",{parentName:"p"},"entities.product")," to extract information about the product that the user is interested in. MaxBot detects entities in the user input by using phrases, regexps or prebuilt set of rules."),(0,o.kt)("p",null,"Rule-based entities cover commonly used categories, such as numbers or dates. You can just use rule based entities without defining them in bot resources. See ",(0,o.kt)("a",{parentName:"p",href:"/design-reference/context#builtin-entities"},"Context Variables")," guide for a list of rule-based entities."),(0,o.kt)("p",null,"Phrase and regex entities are defined in bot resources. An entity definition includes a set of entity values that represent vocabulary that is often used in the context of a given intent. For each value, you define a set of recognition rules, which can be either phrases or regular expressions."),(0,o.kt)("h3",{id:"phrase-entities"},"Phrase Entities"),(0,o.kt)("p",null,"You define an entity (",(0,o.kt)("inlineCode",{parentName:"p"},"entities.menu"),"), and then one or more values for that entity (",(0,o.kt)("inlineCode",{parentName:"p"},"standard"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"vegetarian"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"cake"),'). For each value, you specify a bunch of phrases with which this value can be mentioned in the user input, e.g. "cake shop", "dessert menu" and "bakery offerings" for the ',(0,o.kt)("inlineCode",{parentName:"p"},"cake")," value etc."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"entities:\n  - name: menu\n    values:\n      - name: standard\n        phrases:\n          - standard\n          - carte du jour\n          - cuisine\n      - name: vegetarian\n        phrases:\n          - vegetarian\n          - vegan\n          - plants-only\n      - name: cake\n        phrases:\n          - cake shop\n          - dessert menu\n          - bakery offerings\n")),(0,o.kt)("p",null,"MaxBot recognizes pieces of information in the user input that closely match the phrases that you defined for the entity as mentions of that entity."),(0,o.kt)("h3",{id:"regex-entities"},"Regex Entities"),(0,o.kt)("p",null,"You define an entity (",(0,o.kt)("inlineCode",{parentName:"p"},"entities.order_number"),"), and then one or more values for that entity (",(0,o.kt)("inlineCode",{parentName:"p"},"short_syntax"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"full_syntax"),"). For each value, you specify a regular expression that defines the textual pattern of mentions of that value type."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"entities:\n  - name: order_number\n    values:\n      - name: short_syntax\n        regexps:\n          - '[A-Z]{2}\\d{5}'\n      - name: full_syntax\n        regexps:\n          - '[DEF]\\-[A-Z]{2}\\d{5}'\n")),(0,o.kt)("p",null,"Note, that we use single-quoted strings to specify regular expressions. This avoids escaping mess when your string contains a lot of backslashes."),(0,o.kt)("p",null,"MaxBot looks for patterns matching your regular expression in the user input, and identifies any matches as mentions of that entity."),(0,o.kt)("h3",{id:"using-entities"},"Using entities"),(0,o.kt)("p",null,"Use the syntax ",(0,o.kt)("inlineCode",{parentName:"p"},"entities.order_number"),' in node condition to trigger node when an entity is recognized in the user input. This expression checks whether any of the values that are defined for the "order_number" entity were detected in the user input. If so, the node or response is processed.'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"- condition: entities.order_number\n  response: ...\n")),(0,o.kt)("p",null,"Use the syntax ",(0,o.kt)("inlineCode",{parentName:"p"},"entities.menu.vegetarian")," to trigger node when ",(0,o.kt)("em",{parentName:"p"},"the entity value")," is detected in the user input. This expression checks whether the vegetarian menu was detected in the user input."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"- condition: entities.menu.vegetarian\n  response: ...\n")),(0,o.kt)("h2",{id:"dialog-tree"},"Dialog Tree"),(0,o.kt)("p",null,"The dialog tree defines what your assistant says in response to customers. A tree is composed of multiple nodes. Each node contains, at a minimum, a condition and a response."),(0,o.kt)("h3",{id:"root-nodes"},"Root nodes"),(0,o.kt)("p",null,"A root node represents the start of a topic of dialog between your bot and the user. In the simplest form, the user asks a question, the bot traverses the list of root nodes of the tree, finds a suitable one and gives the answer to the user."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"dialog:\n  - condition: intents.greetings\n    response: Good day to you!\n  - condition: intents.ending\n    response: OK. See you later.\n  - condition: true\n    response: Sorry I don't understand.\n")),(0,o.kt)("p",null,"The dialog may looks like"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\ud83e\uddd1 hello\n\ud83e\udd16 Good day to you!\n\ud83e\uddd1 how are you?\n\ud83e\udd16 Sorry I don't understand.\n\ud83e\uddd1 bye\n\ud83e\udd16 OK. See you later.\n")),(0,o.kt)("h3",{id:"followup-nodes"},"Followup nodes"),(0,o.kt)("p",null,"You may want to ask the user for more input that is needed to respond correctly. You can ask for more details in a text response and create one or more followup nodes to process the new input."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"dialog:\n  - condition: intents.menu\n    label: menu\n    response:\n      - text: Which menu do you want to see?\n    followup:\n      - condition: entities.menu.standard\n        response: To see our menu, go to the ...\n      - condition: entities.menu.vegetarian\n        response: To see our vegetarian menu, go to the ...\n      - condition: entities.menu.cake\n        response: To see our cake shop menu, go to the ...\n")),(0,o.kt)("p",null,"The dialog may looks like"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\ud83e\uddd1 I want to see a menu\n\ud83e\udd16 Which menu do you want to see?\n\ud83e\uddd1 Cake shop\n\ud83e\udd16 To see our cake shop menu, go to the ...\n")),(0,o.kt)("h2",{id:"conditions"},"Conditions"),(0,o.kt)("p",null,"Condition specifies the information that must be present in the user input for this node to be used in the conversation. The information is typically a specific intent. It might also be an entity or a state variable value and more."),(0,o.kt)("h3",{id:"intents-1"},(0,o.kt)("inlineCode",{parentName:"h3"},"intents")),(0,o.kt)("p",null,"The simplest condition is a single intent. The node is triggered if the MaxBot determines that the purpose of the user input maps to the pre-defined intent."),(0,o.kt)("p",null,'Let\'s say you define an intent called "weather". Put the ',(0,o.kt)("inlineCode",{parentName:"p"},"intents.weather")," expression after the ",(0,o.kt)("inlineCode",{parentName:"p"},"condition")," keyword to check if the user input is asking for a weather forecast. If so, the node with the ",(0,o.kt)("inlineCode",{parentName:"p"},"intents.weather")," condition is processed."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"- condition: intents.weather\n  response: ...\n")),(0,o.kt)("h3",{id:"entities-1"},(0,o.kt)("inlineCode",{parentName:"h3"},"entities")),(0,o.kt)("p",null,"Use the syntax ",(0,o.kt)("inlineCode",{parentName:"p"},"entities.city")," in node condition to trigger node when ",(0,o.kt)("em",{parentName:"p"},"any value for the entity"),' is recognized in the user input. This expression checks whether any of the city names that are defined for the "city" entity were detected in the user input. If so, the node or response is processed.'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"- condition: entities.city\n  response: ...\n")),(0,o.kt)("p",null,"Use the syntax ",(0,o.kt)("inlineCode",{parentName:"p"},"entities.city.boston")," to trigger node when ",(0,o.kt)("em",{parentName:"p"},"the entity value")," is detected in the user input. Assuming you have defined the value ",(0,o.kt)("inlineCode",{parentName:"p"},"boston")," for the entity, this expression checks whether the specific city name, Boston, was detected in the user input."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"- condition: entities.city.boston\n  response: ...\n")),(0,o.kt)("h3",{id:"user-slot-dialog"},(0,o.kt)("inlineCode",{parentName:"h3"},"user"),", ",(0,o.kt)("inlineCode",{parentName:"h3"},"slot"),", ",(0,o.kt)("inlineCode",{parentName:"h3"},"dialog")),(0,o.kt)("p",null,"The node is used if the state variable expression that you specify is true. Use the syntax with ",(0,o.kt)("a",{parentName:"p",href:"/design-reference/booleans#comparisons"},"comparison operators")," like, ",(0,o.kt)("inlineCode",{parentName:"p"},'dialog.channel_name == "telegram"')," or ",(0,o.kt)("inlineCode",{parentName:"p"},"slots.guests > 5"),"."),(0,o.kt)("p",null,"Make sure state variables are initialized before usage, otherwise use them with the ",(0,o.kt)("a",{parentName:"p",href:"/design-reference/jinja#filter-default"},"default filter"),": ",(0,o.kt)("inlineCode",{parentName:"p"},"slots.counter|default(0) > 1"),"."),(0,o.kt)("p",null,"For node conditions, state variables is typically used with an ",(0,o.kt)("inlineCode",{parentName:"p"},"and")," operator and another condition value because something in the user input must trigger the node."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'- condition: intents.book_restaurant and user.city == "boston"\n  response: ...\n')),(0,o.kt)("p",null,"Use state variables alone in the template conditions which are used to change the response based on a specific state variable value."),(0,o.kt)("p",null,"For more information about state variables, see ",(0,o.kt)("a",{parentName:"p",href:"/design-guides/state"},"State Variables")," guide."),(0,o.kt)("h3",{id:"message"},(0,o.kt)("inlineCode",{parentName:"h3"},"message")),(0,o.kt)("p",null,"Messages are what you receive from the user. Text messages and images supported for all channels out of the box."),(0,o.kt)("p",null,"Use the syntax like ",(0,o.kt)("inlineCode",{parentName:"p"},"message.text")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"message.image")," in node condition to trigger node when the ",(0,o.kt)("em",{parentName:"p"},"message of particular type")," is received from the user."),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"message.text")," expression is typically used to capture the exact text uttered by the user."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'- condition: message.text\n  response: "You said: {{ message.text }}"\n')),(0,o.kt)("p",null,"See ",(0,o.kt)("a",{parentName:"p",href:"/design-reference/protocol"},"Protocol")," reference to learn more about different types of messages."),(0,o.kt)("h3",{id:"anything-else-conditions"},'"Anything else" Conditions'),(0,o.kt)("p",null,'"Anything else" conditions are what you use at the end of the node list, to be processed when the user input does not match any other nodes. Typically this last node returns a generic message. There are several types of "anything else" conditions that you can use depending on your needs.'),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"true")," condition is always evaluated to true. You can use it at the end of a list of nodes to catch any requests that did not match any of the previous conditions."),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"message")," expression is used in to trigger node if the MaxBot receives the ",(0,o.kt)("em",{parentName:"p"},"any type of message")," from the user, i.e. text message, image file, button click, etc. This is the opposite of ",(0,o.kt)("inlineCode",{parentName:"p"},"rpc")," methods, which are called by integrations and not by users."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"- condition: message\n  response: I am triggered by the user!\n- condition: rpc\n  response: Got an RPC call!\n")),(0,o.kt)("p",null,"Use the ",(0,o.kt)("inlineCode",{parentName:"p"},"message.text")," expression in the last node in the list to match user text messages that does not match any other dialog nodes. This is opposed to media files and other structured messages that may be sent by the user."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"- condition: intents.greetings\n  response: Good day to you!\n- condition: intents.ending\n  response: OK. See you later.\n- condition: message.text\n  response: Sorry I don't understand.\n")),(0,o.kt)("p",null,'When the bot receives any text message that is not recognized as a hello or goodbye, it will respond "Sorry I don\'t understand."'),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"intents.irrelevant")," condition will evaluate to true if the user sends a text message and MaxBot could not recognize any intent in that message."),(0,o.kt)("p",null,"Be aware that using these conditions may have side effects. For example, they can make ",(0,o.kt)("a",{parentName:"p",href:"/design-guides/digressions#avoid-anything-else"},"digressions impossible"),"."),(0,o.kt)("h3",{id:"boolean-conditions"},"Boolean Conditions"),(0,o.kt)("h4",{id:"true"},(0,o.kt)("inlineCode",{parentName:"h4"},"true")),(0,o.kt)("p",null,"The condition is always evaluated to true. You can use it at the end of a list of nodes to catch any requests that did not match any of the previous conditions."),(0,o.kt)("h4",{id:"false"},(0,o.kt)("inlineCode",{parentName:"h4"},"false")),(0,o.kt)("p",null,"The condition is always evaluated to false. You might use this at the start of a branch that is under development, to prevent it from being used, or as the condition for a node that provides a common function and is used only as the target of a ",(0,o.kt)("inlineCode",{parentName:"p"},"jump_to")," control command."),(0,o.kt)("h2",{id:"responses"},"Responses"),(0,o.kt)("p",null,"Response is the utterance that bot uses to respond to the user. The response can also be a list of commands to show an image or clickable buttons."),(0,o.kt)("h3",{id:"text-responses"},"Text Responses"),(0,o.kt)("p",null,"Simply put the text that you want to display to the user after the ",(0,o.kt)("inlineCode",{parentName:"p"},"response")," keyword."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"response: Good day to you!\n")),(0,o.kt)("p",null,"The string may contain delimeters and special characters (",(0,o.kt)("inlineCode",{parentName:"p"},":"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"#")," and so on), in which case it must be enclosed in quotation marks."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'response: "We are the #1!"\n')),(0,o.kt)("h3",{id:"long-lines"},"Long lines"),(0,o.kt)("p",null,"You may want to display a long line to the user, but it's inconvenient to put such lines in a text editor. Split the long line as you want and use the folded style ",(0,o.kt)("inlineCode",{parentName:"p"},">-")," wich replaces newlines with spaces."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"response: >-\n    We have no brick and mortar stores.\n    But, with an internet connections,\n    you can shop as from anywhere!\n")),(0,o.kt)("p",null,"The newlines will be replaced and the user will get a single line of text:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\ud83e\udd16 We have no brick and mortar stores. But, with an internet connections, you can shop as from anywhere!\n")),(0,o.kt)("h3",{id:"multiline-strings"},"Multiline strings"),(0,o.kt)("p",null,"A single text response can include multiple lines. Use the literal string style ",(0,o.kt)("inlineCode",{parentName:"p"},"|-")," that keeps newlines and extra indentation for multiline response."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"response: |-\n    We offer different types of menus:\n        * standard,\n        * vegeterian,\n        * cake shop.\n")),(0,o.kt)("p",null,"The user gets the resulting string as is."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"We offer different types of menus:\n    * standard,\n    * vegeterian,\n    * cake shop.\n")),(0,o.kt)("p",null,"Folded and literal strings can contain any character without quotes or escaping."),(0,o.kt)("h3",{id:"command-text"},"Command ",(0,o.kt)("inlineCode",{parentName:"h3"},"text")),(0,o.kt)("p",null,"The other way to send a text to the user is to use ",(0,o.kt)("inlineCode",{parentName:"p"},"text")," command. The argument to the command is the reply string to the user."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"response:\n  - text: Good day to you!\n")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"text")," command doesn't seem very useful on its own, but it will come in handy when you need to use multiple commands at once in a response."),(0,o.kt)("h3",{id:"command-image"},"Command ",(0,o.kt)("inlineCode",{parentName:"h3"},"image")),(0,o.kt)("p",null,"Include images in your response using an ",(0,o.kt)("inlineCode",{parentName:"p"},"image")," command. Add the full URL to the hosted image file into the ",(0,o.kt)("inlineCode",{parentName:"p"},"url")," argument."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"response:\n  - image:\n      url: https://example.com/hello.png\n")),(0,o.kt)("p",null,"If you want to display an image caption in the response, then add them in the ",(0,o.kt)("inlineCode",{parentName:"p"},"caption")," argument."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"response:\n  - image:\n      url: https://example.com/hello.png\n      caption: Hello, Image!\n")),(0,o.kt)("p",null,"The image file must be stored in a location that is publicly addressable by an URL. See your messaging platform's documentation for image format and size limits."),(0,o.kt)("h3",{id:"command-quick_reply"},"Command ",(0,o.kt)("inlineCode",{parentName:"h3"},"quick_reply")),(0,o.kt)("p",null,"Add ",(0,o.kt)("inlineCode",{parentName:"p"},"quick_reply")," command when you want to give the user a set of options to choose from. For example, you can construct a response like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"response:\n  - quick_reply:\n      text: Which of these items do you want to insure?\n      buttons:\n        - Boat\n        - Car\n        - Home\n")),(0,o.kt)("p",null,"When the button is clicked, its label will be passed to the bot as user input. You may use ",(0,o.kt)("a",{parentName:"p",href:"#phrase-entities"},"phrase entities")," to recognize this user input. Most channels allow a limited number of buttons to be displayed (for example, 10 or less) and limit the length of the button label."),(0,o.kt)("p",null,"A complete list of all reply commands and their arguments is contained in the ",(0,o.kt)("a",{parentName:"p",href:"/design-reference/protocol#commandschema"},"Protocol")," reference."),(0,o.kt)("h3",{id:"control-commands"},"Control Commands"),(0,o.kt)("p",null,"You can end the list of reply commands with a special ",(0,o.kt)("em",{parentName:"p"},"control command")," that will determine the further course of the conversation flow. You can end the node response with one of the commands below."),(0,o.kt)("p",null,"Diffirent kinds of dialog flows has their own sets of control commands which is described in the ",(0,o.kt)("a",{parentName:"p",href:"/design-guides/dialog-tree"},"Dialog Tree Guide"),", ",(0,o.kt)("a",{parentName:"p",href:"/design-guides/slot-filling"},"Slot Filling Guide")," and ",(0,o.kt)("a",{parentName:"p",href:"/design-guides/digressions"},"Digressions Guide"),"."),(0,o.kt)("h2",{id:"templates"},"Templates"),(0,o.kt)("h3",{id:"text-templates"},"Text Templates"),(0,o.kt)("p",null,"Add ",(0,o.kt)("inlineCode",{parentName:"p"},"!jinja")," tag to your ",(0,o.kt)("em",{parentName:"p"},"text response")," to turn it into a ",(0,o.kt)("em",{parentName:"p"},"text template"),". Include any context variable value in your response using the ",(0,o.kt)("inlineCode",{parentName:"p"},"{{ ... }}")," print-statement. If you now that the ",(0,o.kt)("inlineCode",{parentName:"p"},"user.name")," variable is set to the name of the user, then you can refer to it in the text template"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"response: !jinja Good day to you, {{ user.name }}!\n")),(0,o.kt)("p",null,"If the user name is Norman, then the response that is displayed to user is"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\ud83e\udd16 Good day to you, Norman!\n")),(0,o.kt)("p",null,"The same rules about ",(0,o.kt)("a",{parentName:"p",href:"#plain-style"},"delimiter collisions")," also apply to template strings. For instance, plain YAML strings cannot start with ",(0,o.kt)("inlineCode",{parentName:"p"},"{")," character. So you must quote the string that starts with variable substitution."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'response: !jinja "{{ user.name }}, right?"\n')),(0,o.kt)("p",null,"Or you can use the litreal style."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"response: !jinja |-\n    {{ user.name }}, right?\n")),(0,o.kt)("h3",{id:"yaml-templates"},"YAML Templates"),(0,o.kt)("p",null,"The YAML templates render not a text string, but a YAML document. Such templates are always multi-line, append pipe (",(0,o.kt)("inlineCode",{parentName:"p"},"|-"),") indicator to the yaml tag: ",(0,o.kt)("inlineCode",{parentName:"p"},"!jinja/yaml |-"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"response: !jinja/yaml |-\n  - text: Good day to you, {{ user.name }}!\n")),(0,o.kt)("p",null,"You can substitute arguments of any command. For example, the ",(0,o.kt)("inlineCode",{parentName:"p"},"url")," argument of the ",(0,o.kt)("inlineCode",{parentName:"p"},"image")," command"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"response: !jinja/xml |-\n  - image:\n      url: {{ product.picture_url }}\n")),(0,o.kt)("p",null,"You get something like"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"- image:\n    url: https://examples.com/legendary.png\n")),(0,o.kt)("p",null,"More complex templates are also possible. If you need to be able to populate the list of buttons with different values based on some other factors, you can design a dynamic ",(0,o.kt)("inlineCode",{parentName:"p"},"quick_reply")," command using loop statement."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"response: !jinja/yaml |-\n    {% if slots.products %}\n      - quick_reply:\n          text: Choose one of our products.\n          buttons:\n            {% for product in slots.products %}\n            - {{ product.name|yaml_dquote }}\n            {% endfor %}\n    {% else %}\n      - text: I can't find the products that match your request.\n    {% endif %}\n")),(0,o.kt)("p",null,"Given a list of products in ",(0,o.kt)("inlineCode",{parentName:"p"},"slots.products")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'[\n    {"name": "Anti-Gravity Boots"},\n    {"name": "Fountain of Youth"},\n    {"name": "Inflatable Flower Bed"},\n]\n')),(0,o.kt)("p",null,"you will get the following output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'- quick_reply:\n      text: Choose one of the products.\n      buttons:\n        - "Anti-Gravity Boots"\n        - "Fountain of Youth"\n        - "Inflatable Flower Bed"\n')),(0,o.kt)("p",null,"See ",(0,o.kt)("a",{parentName:"p",href:"/design-guides/templates"},"Templates")," for more information about template engine."),(0,o.kt)("h2",{id:"jump-to-a-node"},"Jump to a node"),(0,o.kt)("p",null,"You can configure a node jump directly to another node after it is processed. This allow the bot to change the topic by moving between adjacent branches of the tree. Jumps from child nodes to parent nodes implement recursive behavior within the same topic (branch)."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"dialog:\n  - condition: intents.cancel_order\n    label: ask_order_number\n    response: What is the order number?\n    followup:\n      - condition: entities.order_number\n        response: OK. The order is canceled.\n      - condition: true\n        response:\n          - text: I need the order number to cancel the order for you.\n          - jump_to: {node: ask_order_number, transition: response}\n")),(0,o.kt)("p",null,"For the ",(0,o.kt)("inlineCode",{parentName:"p"},"jump_to"),' command, we used a more compact way of writing arguments called "flow collections".'),(0,o.kt)("p",null,"The dialog may looks like"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\ud83e\uddd1 I want to cancel my order.\n\ud83e\udd16 What is the order number?\n\ud83e\uddd1 I didn't remember\n\ud83e\udd16 I need the order number to cancel the order for you.\n\ud83e\udd16 What is the order number?\n\ud83e\uddd1 AB12345\n\ud83e\udd16 OK. The order is canceled.\n")),(0,o.kt)("h2",{id:"slot-filling"},"Slot Filling"),(0,o.kt)("p",null,"A tree node can contain a ",(0,o.kt)("a",{parentName:"p",href:"/design-guides/slot-filling"},"slot filling")," block. A slot is a piece of information used by the bot to answer the user's question. The bot asks questions to the user until it knows the values of all the required slots and answers the user's original question after that. The dialog built on slot filling allows the user to enter information in a random order without waiting for the bot to ask questions."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"dialog:\n  - condition: intents.reservation\n    label: reservation\n    slot_filling:\n      - name: date\n        check_for: entities.date\n        prompt: What day would you like to come in?\n      - name: time\n        check_for: entities.time\n        prompt: What time do you want the reservation to be made for?\n      - name: guests\n        check_for: entities.number\n        prompt: How many people will be dining?\n    response: !jinja >-\n        OK. I am making you a reservation for\n        {{ slots.guests }} on {{ slots.date }} at {{ slots.time }}.\n")),(0,o.kt)("p",null,"The user can sequentially answer the questions."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\ud83e\uddd1 i want to make a reservation\n\ud83e\udd16 What day would you like to come in?\n\ud83e\uddd1 tomorrow\n\ud83e\udd16 What time do you want the reservation to be made for?\n\ud83e\uddd1 at 5pm\n\ud83e\udd16 How many people will be dining?\n\ud83e\uddd1 6\n\ud83e\udd16 OK. I am making you a reservation for 6 on 2022-05-29 at 17:00:00.\n")),(0,o.kt)("p",null,"Maybe not sequentially and several answers at the same time."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\ud83e\uddd1 i want to make a reservation\n\ud83e\udd16 What day would you like to come in?\n\ud83e\uddd1 there will be six of us\n\ud83e\udd16 What day would you like to come in?\n\ud83e\uddd1 tomorrow at 5pm\n\ud83e\udd16 OK. I am making you a reservation for 6 on 2022-05-29 at 17:00:00.\n")),(0,o.kt)("p",null,"Or just provide all the information."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\ud83e\uddd1 Can 6 of us get a table for lunch tomorrow at 5pm?\n\ud83e\udd16 OK. I am making you a reservation for 6 on 2022-05-29 at 17:00:00.\n")),(0,o.kt)("h2",{id:"digressions"},"Digressions"),(0,o.kt)("p",null,"During the communication, the user may suddenly change the topic. The bot should keep the conversation going. So it must switch from one branch to another corresponding to the new topic. Moreover, after discussing a new topic, the bot can optionally switch back and prompt the user to complete the discussion of the old topic. The built-in mechanism for such switches is called ",(0,o.kt)("a",{parentName:"p",href:"/design-guides/digressions"},"digressions"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"dialog:\n  - condition: intents.restaurant_opening_hours\n    response: The restaurant is open from 8am to 8pm.\n  - condition: intents.reservation\n    label: reservation\n    slot_filling:\n      - name: date\n        check_for: entities.date\n        prompt: What day would you like to come in?\n      - name: time\n        check_for: entities.time\n        prompt: What time do you want the reservation to be made for?\n      - name: guests\n        check_for: entities.number\n        prompt: How many people will be dining?\n    response: !jinja >-\n        OK. I am making you a reservation for\n        {{ slots.guests }} on {{ slots.date }} at {{ slots.time }}.\n")),(0,o.kt)("p",null,"The dialog may looks like"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\ud83e\uddd1 Can 6 of us get a table for lunch tomorrow\n\ud83e\udd16 What time do you want to go?\n\ud83e\uddd1 What time do you close?\n\ud83e\udd16 The restaurant is open from 8am to 8pm.\n\ud83e\udd16 What time do you want to go?\n\ud83e\uddd1 at 5pm\n\ud83e\udd16 OK. I am making you a reservation for 6 on 2022-05-29 at 17:00:00.\n")),(0,o.kt)("h2",{id:"extensions"},"Extensions"),(0,o.kt)("p",null,"You can use extensions to add more features to your bot. Enable and configure extensions in bot resources."),(0,o.kt)("p",null,"For example, the datetime extension is enabled as follows"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"extensions:\n    datetime: {}\n")),(0,o.kt)("p",null,"Where ",(0,o.kt)("inlineCode",{parentName:"p"},"datetime")," is the name of the extension and value ",(0,o.kt)("inlineCode",{parentName:"p"},"{}")," is the extension configuration dictionary. In our case configuration is empty. Generally, each extension has it's own configuration schema described in the extension's documentation. For example, an extension that provides filters to format numbers and dates could be configured as follows"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"extensions:\n  format: { locale: en }\n")),(0,o.kt)("p",null,"Refer to the extension's documentation for the specific features provided by this extension and its configuration."),(0,o.kt)("h2",{id:"resources"},"Resources"),(0,o.kt)("h3",{id:"resource-directory"},"Resource Directory"),(0,o.kt)("p",null,"In the simple case you create bot by putting all the resources into the single file usually called ",(0,o.kt)("em",{parentName:"p"},"bot.yaml"),". As your bot grows, it gets more convenient to split resources, especially intents and entities, into several files and place them into the MaxBot-specified directory structure."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Place intent definitions in ",(0,o.kt)("inlineCode",{parentName:"li"},"*.yaml")," files in the ",(0,o.kt)("inlineCode",{parentName:"li"},"intents/")," directory."),(0,o.kt)("li",{parentName:"ul"},"Place entity definitions in ",(0,o.kt)("inlineCode",{parentName:"li"},"*.yaml")," files in the ",(0,o.kt)("inlineCode",{parentName:"li"},"entities/")," directory."),(0,o.kt)("li",{parentName:"ul"},"Place dialog tree in ",(0,o.kt)("inlineCode",{parentName:"li"},"dialog.yaml"),"."),(0,o.kt)("li",{parentName:"ul"},"Leave the rest of the definitions in ",(0,o.kt)("inlineCode",{parentName:"li"},"bot.yaml"),".")),(0,o.kt)("p",null,"Below are an example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"mybot/\n    intents/\n        core-intents.yaml\n        faq-intents.yaml\n    entities/\n        core-entities.yaml\n        products-entities.yaml\n    bot.yaml\n    dialog.yaml\n")),(0,o.kt)("p",null,"Then you can pass the path to a directory as a parameter to CLI app:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ maxbot run --bot mybot/\n\u2713 Started polling updater... Press 'Ctrl-C' to exit.\n")),(0,o.kt)("h3",{id:"using-environment-variables"},"Using environment variables"),(0,o.kt)("p",null,"If you want to publish you bot, you may notice that it contains some sensitive information such as authorization keys for channels. It's good practice to store such secrets in environment variables rather than in code."),(0,o.kt)("p",null,"For example, the telegram channel settings contains ",(0,o.kt)("inlineCode",{parentName:"p"},"api_token")," which is the secret token used to authenticate your bot. So write the reference to the environment variable ",(0,o.kt)("inlineCode",{parentName:"p"},"TELEGRAM_API_KEY")," instead of actual value. Use the ",(0,o.kt)("inlineCode",{parentName:"p"},"!ENV")," tag to mark a string as containing an environment variable."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"channels:\n    telegram:\n        api_token: !ENV ${TELEGRAM_API_KEY}\n")),(0,o.kt)("p",null,"After that, make the variable available to the CLI app using bash export, for example."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"$ export TELEGRAM_API_KEY=\"110201543:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw\"\n$ maxbot run --bot mybot/\n\u2713 Started polling updater... Press 'Ctrl-C' to exit.\n")),(0,o.kt)("p",null,"Another way is to create an ",(0,o.kt)("inlineCode",{parentName:"p"},".env")," file in your working directory and put a variable in that file."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"$ echo 'TELEGRAM_API_KEY=\"110201543:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw\"' >> .env\n")),(0,o.kt)("p",null,"Keep ",(0,o.kt)("inlineCode",{parentName:"p"},".env")," file only on your laptop. Run CLI app from the same directory and it works."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"$ maxbot run --bot mybot/\n\u2713 Started polling updater... Press 'Ctrl-C' to exit.\n")))}d.isMDXComponent=!0}}]);