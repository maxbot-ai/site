<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-design-reference/context">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.0">
<title data-rh="true">Context | Maxbot Open Source Conversational AI Framework</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://maxbot-ai.maxbot.ai/design-reference/context"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Context | Maxbot Open Source Conversational AI Framework"><meta data-rh="true" name="description" content="context-reference}"><meta data-rh="true" property="og:description" content="context-reference}"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://maxbot-ai.maxbot.ai/design-reference/context"><link data-rh="true" rel="alternate" href="https://maxbot-ai.maxbot.ai/design-reference/context" hreflang="en"><link data-rh="true" rel="alternate" href="https://maxbot-ai.maxbot.ai/design-reference/context" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.0f77548b.css">
<link rel="preload" href="/assets/js/runtime~main.a7f9c446.js" as="script">
<link rel="preload" href="/assets/js/main.4414c277.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_black.svg" alt="Maxbot Open Source Conversational AI Framework" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_blue.svg" alt="Maxbot Open Source Conversational AI Framework" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/intro">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/maxbot-ai" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/intro">Intoduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/category/getting-started">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/getting-started/installation">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/getting-started/quick-start">Quick Start</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/getting-started/creating-bots">Creating Bots</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/category/tutorials">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/category/design-guides">Design Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Design Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/category/design-reference">Design Reference</a><button aria-label="Toggle the collapsible sidebar category &#x27;Design Reference&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/design-reference/cli">MaxBot CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/design-reference/resources">Resources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/design-reference/protocol">Protocol</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/design-reference/context">Context</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/design-reference/jinja">Jinja Syntax</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/design-reference/strings">Basic Types</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/category/coding-guides">Coding Guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Coding Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/category/design-reference"><span itemprop="name">Design Reference</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Context</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Context</h1><p>Describes the variable types provided by the bot that you use in expressions and templates.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="context"><code>Context</code><a href="#context" class="hash-link" aria-label="Direct link to context" title="Direct link to context">​</a></h2><p>Attributes of this class are context and special variables.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>intents</code></td><td><a href="#intentsresult">IntentsResult</a></td><td>One or more intents that were recognized in user input.</td></tr><tr><td><code>entities</code></td><td><a href="#entitiesresult">EntitiesResult</a></td><td>One or more entities that were recognized in user input.</td></tr><tr><td><code>user</code></td><td><a href="/design-reference/dictionaries">Dictionary</a></td><td>User state variables that live forever.</td></tr><tr><td><code>slots</code></td><td><a href="/design-reference/dictionaries">Dictionary</a></td><td>Slot state variables that live during discussing a topic.</td></tr><tr><td><code>message</code></td><td><a href="/design-reference/protocol#messageschema">MessageSchema</a></td><td>A message processed by the bot.</td></tr><tr><td><code>dialog</code></td><td><a href="/design-reference/protocol#dialogschema">DialogSchema</a></td><td>General information that does not change or rarely changes during a conversation.</td></tr><tr><td><code>rpc</code></td><td><a href="#rpccontext">RpcContext</a></td><td>The context of the RPC request processed by the bot.</td></tr></tbody></table><p>Special variables related to the <a href="/design-guides/digressions">digression</a> flow.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>digressing</code></td><td><a href="/design-reference/booleans">Boolean</a></td><td>The variable is set to true during the digression. You can check it to <a href="/design-guides/digressions#check-digressing">prevent digressions into</a> a particular root node.</td></tr><tr><td><code>returning</code></td><td><a href="/design-reference/booleans">Boolean</a></td><td>The variable is set to true when returning after digression. Use it to add <a href="/design-guides/digressions#custom-return-message">custom return message</a> to node response.</td></tr></tbody></table><p>The following special variables can help you check and set values in slots.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>current_value</code></td><td>JSON Type</td><td>Current value of the context variable for this slot.</td></tr><tr><td><code>previous_value</code></td><td>JSON Type</td><td>Previous value of the context variable for this slot.</td></tr><tr><td><code>slot_in_focus</code></td><td><a href="/design-reference/booleans">Boolean</a></td><td>Forces the slot <code>check_for</code> expression to be applied to the currently prompted slot only.</td></tr></tbody></table><p>FIXME: The slot_in_focus property always evaluates to a boolean (true or false) value. Only include it in a condition for which you want a boolean result. Do not use it in slot conditions that check for an entity type and then save the entity value, for example.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="intents">Intents<a href="#intents" class="hash-link" aria-label="Direct link to Intents" title="Direct link to Intents">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="recognizedintent"><code>RecognizedIntent</code><a href="#recognizedintent" class="hash-link" aria-label="Direct link to recognizedintent" title="Direct link to recognizedintent">​</a></h3><p>An intent recognized from the user utterance.</p><p>Examples:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">condition</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> intents.top.name.startswith(&quot;buy_&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">condition</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> intents.my_intent and intents.my_intent.confidence </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"> 0.7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td><a href="/design-reference/strings">String</a></td><td>The name of the intent.</td></tr><tr><td><code>confidence</code></td><td><a href="/design-reference/numbers">Float</a></td><td>A rating provided by NLU model that shows how confident it is that an intent is the correct intent. Should be in the range 0.0 &lt; confidence &lt;= 1.0.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="intentsresult"><code>IntentsResult</code><a href="#intentsresult" class="hash-link" aria-label="Direct link to intentsresult" title="Direct link to intentsresult">​</a></h3><p>The result of intent recognition in the user utterance.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="attributes">Attributes<a href="#attributes" class="hash-link" aria-label="Direct link to Attributes" title="Direct link to Attributes">​</a></h4><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>top </code></td><td><a href="#recognizedintent">RecognizedIntent</a></td><td>A recognized intent with the highest confidence score above a certain threshold defined by the NLU model.</td></tr><tr><td><code>ranking</code></td><td><a href="/design-reference/lists">Tuple</a>[<a href="#recognizedintent">RecognizedIntent</a>]</td><td>All recognized intents are sorted in descending order of confidence score.</td></tr><tr><td><code>__getattr__</code></td><td><a href="#recognizedintent">RecognizedIntent</a></td><td>A convenient way to get intent (see example above).</td></tr><tr><td><code>irrelevant</code></td><td><a href="/design-reference/booleans">Boolean</a></td><td>The condition will evaluate to true if the user sends a text message and the bot could not recognize any intent in that message.</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples">Examples<a href="#examples" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><ul><li><p>You can use expressions like <code>intents.top.name == &#x27;reservation&#x27;</code> to check if the user input is asking to make a reservation. But there is a more convenient equivalent expression <code>intents.reservation</code>. If the reservation intent is a top intent, this expression will return intent information and evaluate to true. Otherwise the <code>intents.reservation</code> expression will evaluate to false.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">condition</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> intents.reservation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>You can find any recognized intents with intent names that start with &#x27;ask_&#x27;, using a syntax like this.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">condition</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> intents.top and intents.top.name.startswith(&#x27;ask_&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">response</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>  First, we check that <code>intents.top</code> is defined because it is only present when some intent is recognized from user input.</p></li><li><p>You can check if intent disambiguation is required as follows.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">condition</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> intents.ranking</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain">selectattr(&quot;confidence&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> 0.3)</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain">length </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"> 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>You can use <code>intents.irrelevant</code> condition as an anything else condition at the end of the node list.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="entities">Entities<a href="#entities" class="hash-link" aria-label="Direct link to Entities" title="Direct link to Entities">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="recognizedentity"><code>RecognizedEntity</code><a href="#recognizedentity" class="hash-link" aria-label="Direct link to recognizedentity" title="Direct link to recognizedentity">​</a></h3><p>An entity recognized from the user utterance.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>name</code></td><td><a href="/design-reference/strings">String</a></td><td>The name of the entity.</td></tr><tr><td><code>value</code></td><td>Union[<a href="/design-reference/strings">String</a>, <a href="/design-reference/numbers">Number</a>]</td><td>The value of the entity.</td></tr><tr><td><code>literal</code></td><td><a href="/design-reference/strings">String</a></td><td>How exactly the entity was present in the utterance.</td></tr><tr><td><code>start_char</code></td><td><a href="/design-reference/numbers">Integer</a></td><td>An index of the first char of the literal value in the utterance.</td></tr><tr><td><code>end_char </code></td><td><a href="/design-reference/numbers">Integer</a></td><td>An index of the last char of the literal value in the utterance.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="entitiesproxy"><code>EntitiesProxy</code><a href="#entitiesproxy" class="hash-link" aria-label="Direct link to entitiesproxy" title="Direct link to entitiesproxy">​</a></h3><p>All entities with the same name recognized from the user utterance.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>all_objects</code></td><td><a href="/design-reference/lists">Tuple</a>[<a href="#recognizedentity">RecognizedEntity</a>]</td><td>A list of all entities with the same name.</td></tr><tr><td><code>all_values </code></td><td>Union[<a href="/design-reference/lists">Tuple</a>[<a href="/design-reference/strings">String</a>], <a href="/design-reference/lists">Tuple</a>[<a href="/design-reference/numbers">Number</a>]]</td><td>The values of all entities.</td></tr><tr><td><code>__getattr__</code></td><td>Any</td><td>Access the proxied entities in a convenient way. See <ul><li><a href="#access-the-first-entity">Access the first entity</a></li><li><a href="#checking-a-value-presence">Checking a value presence</a></li></ul></td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="entitiesresult"><code>EntitiesResult</code><a href="#entitiesresult" class="hash-link" aria-label="Direct link to entitiesresult" title="Direct link to entitiesresult">​</a></h3><p>The result of entity recognition in the user utterance.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="attributes-1">Attributes<a href="#attributes-1" class="hash-link" aria-label="Direct link to Attributes" title="Direct link to Attributes">​</a></h4><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>proxies</code></td><td><a href="/design-reference/dictionaries">Dictionary</a>[<a href="/design-reference/strings">String</a>, <a href="#entitiesproxy">EntitiesProxy</a>]</td><td>Maps entity names to proxies with corresponding entities.</td></tr><tr><td><code>all_objects</code></td><td><a href="/design-reference/lists">Tuple</a>[<a href="#recognizedentity">RecognizedEntity</a>]</td><td>A tuple of all recognized entities in the order they are appear in the utterance. See <a href="#access-to-multiple-entities">Access to Multiple Entities</a>.</td></tr><tr><td><code>__getattr__</code></td><td><a href="#entitiesproxy">EntitiesProxy</a></td><td>Convenient access to entity proxy with the entities that matched the name (see examples below).</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="examples-1">Examples<a href="#examples-1" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">​</a></h4><p>Simply use <code>entities.menu</code> instead of <code>entities.proxies[&#x27;menu&#x27;]</code></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">check_for</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> entities.menu</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="capturing-entities">Capturing entities<a href="#capturing-entities" class="hash-link" aria-label="Direct link to Capturing entities" title="Direct link to Capturing entities">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="capturing-an-entity-mention">Capturing an entity mention<a href="#capturing-an-entity-mention" class="hash-link" aria-label="Direct link to Capturing an entity mention" title="Direct link to Capturing an entity mention">​</a></h4><p>To store the value of an entity in a context variable, use this syntax</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{% slot place = entities.place.value %}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For example, the user input is, &quot;I want to go to Paris&quot;. If your <code>entities.place</code> recognizes &quot;Paris&quot;, then the bot saves &quot;Paris&quot; in the <code>slots.place</code> variable.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="capturing-literal-representation">Capturing literal representation<a href="#capturing-literal-representation" class="hash-link" aria-label="Direct link to Capturing literal representation" title="Direct link to Capturing literal representation">​</a></h4><p>Frequently you need to obtain more information than just whether the regular expression matched or not. You can capture the exact span of text from the user input that matches the regular expression.</p><p>For example, the user input is &quot;I want to cancel my order AB12345&quot;. Your regexp entity <code>entities.order_number</code> recognizes the &#x27;<!-- -->[A-Z]<!-- -->{2}\d{5}&#x27; order number format. By configuring the slot variable to store <code>entities.order_number.literal</code>, you indicate that you want to store the part of the input that matched the pattern.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">condition</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> intents.cancel_order and entities.order_number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">response</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token tag" style="color:#00009f">!jinja</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      OK. The order </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> entities.order_number.literal </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> is canceled.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The node response includes a literal representation of the order number provided by the user.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">🧑 I want to cancel my order AB12345.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">🤖 OK. The order AB12345 is canceled.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you omit the <code>.literal</code> property from the value expression, then the entity value name that you specified for the regexp is returned instead of the segment of user input that matched the pattern.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="capturing-regex-groups">Capturing regex groups<a href="#capturing-regex-groups" class="hash-link" aria-label="Direct link to Capturing regex groups" title="Direct link to Capturing regex groups">​</a></h4><p>Any part of a regular expression inside a pair of normal parentheses will be captured as a group.</p><p>TODO: waiting for implementation, usage example, named groups</p><p>See <a href="https://docs.python.org/3/howto/regex.html#grouping" target="_blank" rel="noopener noreferrer">Python Regex Gouping</a> to get more grouping theory and examples.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="multiple-entity-values">Multiple entity values<a href="#multiple-entity-values" class="hash-link" aria-label="Direct link to Multiple entity values" title="Direct link to Multiple entity values">​</a></h3><p>Multiple values can be recognized in the user input for the same entity.
When you refer an entity by name, e.g. <code>entities.menu</code>, you actually get a proxy object that contains a list of recognized entities with the same name and supports default access to the 1st element.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="access-to-multiple-entities">Access to multiple entities<a href="#access-to-multiple-entities" class="hash-link" aria-label="Direct link to Access to multiple entities" title="Direct link to Access to multiple entities">​</a></h4><p>You can access the mentioned list using the <code>entities.menu.all_objects</code> expression.</p><p>For example, a user submits</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">🧑 Are there any specials today for vegan or maybe some bakery offerings?</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The &quot;vegetarian&quot; and &quot;cake&quot; values are detected and are represented in the list that is returned as follows:</p><ul><li><code>entities.menu.all_objects[0].value == &quot;vegetarian&quot;</code></li><li><code>entities.menu.all_objects[1].value == &quot;cake&quot;</code></li></ul><p>The order of entities in the list that is returned matches the order in which they are mentioned in the user input.</p><p>Jinja Expressions contains a powerful <a href="https://jinja.palletsprojects.com/en/3.1.x/templates/#list-of-builtin-filters" target="_blank" rel="noopener noreferrer">libray of filters</a> to work with lists. For example, to capture the literal values for multiple entity mentions, use the <a href="https://jinja.palletsprojects.com/en/3.1.x/templates/#jinja-filters.map" target="_blank" rel="noopener noreferrer">map</a> filter:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">entities.menu.all_objects|map(attribute=&#x27;literal&#x27;)|list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-&gt; [&quot;vegan&quot;, &quot;bakery offerings&quot;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Entities proxy provides shorthand syntax fo the most widely used cases.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="access-the-first-entity">Access the first entity<a href="#access-the-first-entity" class="hash-link" aria-label="Direct link to Access the first entity" title="Direct link to Access the first entity">​</a></h4><p>The <code>entities.menu</code> proxy provide convenient access to the properties of the 1st recognized entity. For example,</p><ul><li><code>entities.menu.value</code> is a shorthand syntax for the <code>entities.menu.all_objects[0].value</code>,</li><li><code>entities.menu.literal</code> is a shorthand syntax for the <code>entities.menu.all_objects[0].literal</code>.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="access-all-values">Access all values<a href="#access-all-values" class="hash-link" aria-label="Direct link to Access all values" title="Direct link to Access all values">​</a></h4><p>To get a list of values of an entity in the user input, use expression <code>entities.menu.all_values</code>. Refer to the list in a dialog response:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">You asked about these menus: {{ entities.menu.all_values|join(&quot;, &quot;) }}.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It is displayed like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">🧑 Are there any specials today for vegan or maybe some bakery offerings?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">🤖 You asked about these menus: vegetarian, cake.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="checking-a-value-presence">Checking a value presence<a href="#checking-a-value-presence" class="hash-link" aria-label="Direct link to Checking a value presence" title="Direct link to Checking a value presence">​</a></h4><p>Use <code>entity.menu.cake</code> if you want the condition to return true any time the term is mentioned in the user input, regardless of the order in which the entities are mentioned. This expression is a shorthand syntax for <code>&quot;cake&quot; in entity.menu.all_values</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="builtin-entities">Builtin entities<a href="#builtin-entities" class="hash-link" aria-label="Direct link to Builtin entities" title="Direct link to Builtin entities">​</a></h3><p>Entities that are based on a prebuilt rules. They cover commonly used categories, such as numbers or dates. You can just use rule based entities without defining them in bot resources.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="entitiesnumber"><code>entities.number</code><a href="#entitiesnumber" class="hash-link" aria-label="Direct link to entitiesnumber" title="Direct link to entitiesnumber">​</a></h4><p>The <code>entities.number</code> detects mentions of numbers in user input. The number can be written with either numerals or words. In either case, a number is returned.</p><p>Recognized formats: &quot;21&quot;, &quot;twenty one&quot;, &quot;3.14&quot; or &quot;1,234.56&quot;.</p><p>The <code>entities.number.value</code> returns canonical numeric value as a integer or a <a href="https://docs.python.org/3/library/decimal.html" target="_blank" rel="noopener noreferrer">Decimal</a>. If the input is &quot;twenty&quot;, returns &quot;20&quot; . If the input is &quot;1,234.56&quot;, returns &quot;1234.56&quot;.</p><p>You can use the value in any <a href="https://jinja.palletsprojects.com/en/3.1.x/templates/#math" target="_blank" rel="noopener noreferrer">math expressions</a>. For example, <code>{{ entities.number.value + 1 }}</code> which outputs &quot;2&quot;.</p><p>The <code>entities.number.literal</code> is the exact phrase in user input that is interpreted to be the number. If the input is &quot;twenty&quot;, returns &quot;twenty&quot;. If the input is &quot;1,234.56&quot; returns &quot;1,234.56&quot;.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="entitiesdate"><code>entities.date</code><a href="#entitiesdate" class="hash-link" aria-label="Direct link to entitiesdate" title="Direct link to entitiesdate">​</a></h4><p>The <code>entities.date</code> detects mentions of dates in user input.</p><p>Recognized formats: &quot;Friday&quot;, &quot;today&quot;, &quot;May 8&quot;.</p><p>The <code>entities.date.value</code> is stored as a string in the format &quot;yyyy-MM-dd&quot;. For example, the mention &quot;May 8&quot; is stored as &quot;2022-05-08&quot;. The system augments missing elements of a date (such as the year for &quot;May 8&quot;) with the current date values.</p><p>The <code>entities.date.literal</code> is the exact phrase in input that is interpreted to be the date. If the input is, &quot;I plan to leave on Saturday.&quot;, then &quot;on Saturday&quot; is returned.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="entitiestime"><code>entities.time</code><a href="#entitiestime" class="hash-link" aria-label="Direct link to entitiestime" title="Direct link to entitiestime">​</a></h4><p>The <code>entities.time</code> detects mentions of times in user input.</p><p>Recognized formats: &quot;at 2pm&quot;, &quot;15:30&quot;.</p><p>The <code>entities.time.value</code> returns the time that is specified in user input in the format &quot;HH:mm:ss&quot;. For example, &quot;13:00:00&quot; for &quot;at 1pm&quot;.</p><p>Use <code>entities.time.literal</code> to get the exact phrase in input that is interpreted to be the time. If the input is, &quot;The store closes at 8PM.&quot;, then &quot;at 8PM&quot; is returned.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="entitiesemail"><code>entities.email</code><a href="#entitiesemail" class="hash-link" aria-label="Direct link to entitiesemail" title="Direct link to entitiesemail">​</a></h4><p>The <code>entities.email</code> detects phrases in user input that look like email addresses. The recognized phrase is returned by the <code>entities.email.value</code> expression. If the input is, <code>&quot;Email me at smith@example.com&quot;</code>, then <code>&quot;smith@example.com&quot;</code> is returned.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="entitiesurl"><code>entities.url</code><a href="#entitiesurl" class="hash-link" aria-label="Direct link to entitiesurl" title="Direct link to entitiesurl">​</a></h4><p>The <code>entities.url</code> detects phrases in user input that look like URL. The recognized phrase is returned by the <code>entities.url.value</code> expression. If the input is, <code>&quot;Welcome to http://example.com&quot;</code>, then <code>&quot;http://example.com&quot;</code> is returned.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rpc">RPC<a href="#rpc" class="hash-link" aria-label="Direct link to RPC" title="Direct link to RPC">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rpcrequest"><code>RpcRequest</code><a href="#rpcrequest" class="hash-link" aria-label="Direct link to rpcrequest" title="Direct link to rpcrequest">​</a></h3><p>RPC request.</p><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>method</code></td><td><a href="/design-reference/strings">String</a></td><td>Requested method.</td></tr><tr><td><code>params</code></td><td><a href="/design-reference/dictionaries">Dictionary</a>[<a href="/design-reference/strings">String</a>, Any]</td><td>Actual parameters.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rpccontext"><code>RpcContext</code><a href="#rpccontext" class="hash-link" aria-label="Direct link to rpccontext" title="Direct link to rpccontext">​</a></h3><p>The context of the RPC request being processed.</p><p><strong>Example.</strong> There is a convenient way to check the called rpc request in scenarios. Instead of</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">condition</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> rpc.request.method == &#x27;my_method&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>you can just write</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">condition</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> rp.my_method</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>request</code></td><td><a href="#rpcrequest">RpcRequest</a></td><td>RPC request.</td></tr><tr><td><code>method</code></td><td><a href="/design-reference/strings">String</a></td><td>Return RPC method if request is present otherwise return <code>none</code>.</td></tr><tr><td><code>params</code></td><td><a href="/design-reference/dictionaries">Dictionary</a>[<a href="/design-reference/strings">String</a>, Any]</td><td>Return RPC params if request is present otherwise return <code>none</code>.</td></tr><tr><td><code>__getattr__ </code></td><td><a href="#rpcrequest">RpcRequest</a></td><td>Return rpc request if its called.</td></tr></tbody></table></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/design-reference/protocol"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Protocol</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/design-reference/jinja"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Jinja Syntax</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#context" class="table-of-contents__link toc-highlight"><code>Context</code></a></li><li><a href="#intents" class="table-of-contents__link toc-highlight">Intents</a><ul><li><a href="#recognizedintent" class="table-of-contents__link toc-highlight"><code>RecognizedIntent</code></a></li><li><a href="#intentsresult" class="table-of-contents__link toc-highlight"><code>IntentsResult</code></a></li></ul></li><li><a href="#entities" class="table-of-contents__link toc-highlight">Entities</a><ul><li><a href="#recognizedentity" class="table-of-contents__link toc-highlight"><code>RecognizedEntity</code></a></li><li><a href="#entitiesproxy" class="table-of-contents__link toc-highlight"><code>EntitiesProxy</code></a></li><li><a href="#entitiesresult" class="table-of-contents__link toc-highlight"><code>EntitiesResult</code></a></li><li><a href="#capturing-entities" class="table-of-contents__link toc-highlight">Capturing entities</a></li><li><a href="#multiple-entity-values" class="table-of-contents__link toc-highlight">Multiple entity values</a></li><li><a href="#builtin-entities" class="table-of-contents__link toc-highlight">Builtin entities</a></li></ul></li><li><a href="#rpc" class="table-of-contents__link toc-highlight">RPC</a><ul><li><a href="#rpcrequest" class="table-of-contents__link toc-highlight"><code>RpcRequest</code></a></li><li><a href="#rpccontext" class="table-of-contents__link toc-highlight"><code>RpcContext</code></a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Maxbot Team</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a7f9c446.js"></script>
<script src="/assets/js/main.4414c277.js"></script>
</body>
</html>